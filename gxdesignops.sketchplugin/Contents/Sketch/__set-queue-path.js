var globalThis=this,global=this;function __skpm_run(e,t){globalThis.context=t;try{var i=function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){e.exports=require("sketch/settings")},function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),e}var h=null;var v=function(e){function t(e,i,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Cancel",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;u(this,t);var d=NSAlert.alloc().init();return d.setIcon(h),d.setMessageText(e),""!=a&&d.setInformativeText(a),n&&d.addButtonWithTitle(n),o&&d.addButtonWithTitle(o),l&&d.addButtonWithTitle(l),r(this,s(t).call(this,d,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),c(t,null,[{key:"setUp",value:function(e){h=NSImage.alloc().initByReferencingFile(e.plugin.urlForResourceNamed("gx.png").path())}}]),c(t,[{key:"run",value:function(){this.window.setAccessoryView(this.topContainer);var e=this.window.runModal();return this.userClickedOk="1000"==e,this.userClickedCancel="1001"==e,this.userClickedThird="1002"==e,this.userClickedOk}}]),t}(function(){function e(t,i){u(this,e),this.window=t;var n=NSView.alloc().initWithFrame(i);this.container=n,this.topContainer=n,this.views=[],this.leftOffset=0,this.rect=i,this.y=NSHeight(this.rect),this.leftColumn=!0,this.leftColWidth=120,this.textOffset=2}return c(e,[{key:"removeLeftColumn",value:function(){this.leftColumn=!1,this.leftColWidth=0,this.textOffset=0}},{key:"initTabs",value:function(e){var t=this.rect;this.tabs=e.map((function(e){return{label:e}}));var i=NSTabView.alloc().initWithFrame(t);this.tabs.forEach((function(e,n){var a=NSViewController.alloc().init();a.originalSize=t;var o=NSView.alloc().initWithFrame(t);o.wantsLayer=!1,a.view=o;var r=NSTabViewItem.alloc().init();r.viewController=a,r.label=e.label,r.initialFirstResponder=o,i.addTabViewItem(r),e.container=o}),this),this.tabView=i,this.container=this.tabs[0].container,this.topContainer=i,this.leftOffset=20,this.y=NSHeight(this.rect)-55}},{key:"setTabForViewsCreating",value:function(e){this.container=this.tabs[e].container,this.y=NSHeight(this.rect)-55}},{key:"enableTextByID",value:function(e,t){if(e in dialog.views){var i=dialog.views[e];i.textColor=t?NSColor.controlTextColor():NSColor.disabledControlTextColor()}}},{key:"enableHintByID",value:function(e,t){if(e in dialog.views){var i=dialog.views[e];i.textColor=t?NSColor.secondaryLabelColor():NSColor.disabledControlTextColor()}}},{key:"enableControlByID",value:function(e,t){dialog.views[e].enabled=t,this.enableTextByID(e+"Label",t),this.enableHintByID(e+"Hint",t)}},{key:"getNewFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=NSMakeRect(this.leftColWidth,this.y-e,-1==t?NSWidth(this.rect)-10-this.leftColWidth:t,e);return this.y-=e+(i>=0?i:10),n}},{key:"addSpace",value:function(){this.getNewFrame(0)}},{key:"addLeftLabel",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:40,n=null;n=this.leftColumn?NSMakeRect(0,this.y-i-this.textOffset,this.leftColWidth-10,i):this.getNewFrame(i);var a=NSTextField.alloc().initWithFrame(n);return a.setStringValue(t),a.setBezeled(!1),a.setDrawsBackground(!1),a.setEditable(!1),a.setSelectable(!1),this.leftColumn&&(a.setFont(NSFont.boldSystemFontOfSize(12)),a.setAlignment(NSTextAlignmentRight)),""!=e&&(this.views[e]=a),this.container.addSubview(a),a}},{key:"addLabel",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=n?Utils.copyRect(n):void 0;a&&(a.size.height=i);var o=NSTextField.alloc().initWithFrame(a||this.getNewFrame(i));return o.setStringValue(t),o.setBezeled(!1),o.setDrawsBackground(!1),o.setEditable(!1),o.setSelectable(!1),""!=e&&(this.views[e]=o),this.container.addSubview(o),this.y+=5,o}},{key:"addComboBox",value:function(e){null==e.label&&(e.label=""),null==e.width&&(e.width=220),""!=e.label&&this.addLabel(id+"Label",e.label,17);var t=NSComboBox.alloc().initWithFrame(e.frame?e.frame:this.getNewFrame(20,e.width));return e.options.length>0&&(t.addItemsWithObjectValues(e.options),t.setNumberOfVisibleItems(e.options.length),t.selectItemAtIndex(0)),t.setCompletes(1),this.container.addSubview(t),this.views[e.id]=t,t}},{key:"addCheckbox",value:function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:18;i=0==i?NSOffState:NSOnState;var o=NSButton.alloc().initWithFrame(this.getNewFrame(a,-1,6));return o.setButtonType(NSSwitchButton),o.setBezelStyle(0),o.setTitle(t),o.setState(i),o.setCOSJSTargetFunction(n),this.container.addSubview(o),this.views[e]=o,o}},{key:"addTextBox",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:120;""!=t&&this.addLabel(e+"Label",t,17);var o=NSTextField.alloc().initWithFrame(this.getNewFrame(a));return o.setEditable(!0),o.setBordered(!0),o.setStringValue(i),""!=n&&o.setPlaceholderString(n),this.container.addSubview(o),this.views[e]=o,o}},{key:"addTextViewBox",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:120;""!=t&&this.addLabel(e+"Label",t,17);var a=this.getNewFrame(n),o=NSScrollView.alloc().initWithFrame(a);o.setHasVerticalScroller(!0),o.setHasHorizontalScroller(!0);var r=NSTextView.alloc().initWithFrame(a);return r.setEditable(!1),r.setString(i+""),o.addSubview(r),o.setDocumentView(r),this.container.addSubview(o),this.views[e]=r,r}},{key:"addTextInput",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:220,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;""!=t&&this.addLabel(e+"Label",t,17,o);var r=NSTextField.alloc().initWithFrame(o||this.getNewFrame(20,a));return r.setEditable(!0),r.setBordered(!0),r.setStringValue(i+""),""!=n&&r.setPlaceholderString(n),this.container.addSubview(r),this.views[e]=r,r}},{key:"addPathInput",value:function(e){"width"in e||(e.width=220),"widthSelect"in e||(e.widthSelect=50),"inlineHint"in e||(e.inlineHint=""),"askFilePath"in e||(e.askFilePath=!1),""!=e.label&&this.addLabel(e.id+"Label",e.label,17);var t=this.getNewFrame(28,e.width-e.widthSelect-5),i=Utils.copyRect(t);i.origin.x=i.origin.x+e.width-e.widthSelect,i.origin.y-=3;var n="comboBoxOptions"in e?this.addComboBox({id:e.id,options:e.comboBoxOptions,width:0,frame:t}):this.addTextInput(e.id,"",e.textValue,e.inlineHint,0,t);return this.addButton(e.id+"Select",e.labelSelect,(function(){var t=e.askFilePath?Utils.askFilePath(n.stringValue()+""):Utils.askPath(n.stringValue()+"");null!=t&&n.setStringValue(t)}),0,i),n}},{key:"addSelect",value:function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;""!=t&&this.addLabel(e+"Label",t,15);var o=NSPopUpButton.alloc().initWithFrame(this.getNewFrame(23,a));return o.addItemsWithTitles(n),o.selectItemAtIndex(i),this.container.addSubview(o),this.views[e]=o,o}},{key:"addRadioButtons",value:function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;""!=t&&this.addLabel(e+"Label",t,15),i<0&&(i=0);var o=this.startRadioButtions(e,i),r=!0,s=!1,l=void 0;try{for(var u,d=n[Symbol.iterator]();!(r=(u=d.next()).done);r=!0){var c=u.value,h=o.btns.length,v=NSButton.alloc().initWithFrame(this.getNewFrame(18,a));v.setButtonType(NSRadioButton),v.setTitle(c),v.setState(h!=i?NSOffState:NSOnState),v.myGroup=o,v.myIndex=h,v.setCOSJSTargetFunction(o.radioTargetFunction),this.container.addSubview(v),o.btns.push(v)}}catch(f){s=!0,l=f}finally{try{r||null==d.return||d.return()}finally{if(s)throw l}}return o}},{key:"startRadioButtions",value:function(e,t){var i={id:e,btns:[],selectedIndex:t,radioTargetFunction:function(e){e.myGroup.selectedIndex=e.myIndex}};return this._buttonsGroups=i,this.views[e]=this._buttonsGroups,this._buttonsGroups}},{key:"addRadioButton",value:function(e,t,i,n){var a=this._buttonsGroups.selectedIndex==i,o=NSButton.alloc().initWithFrame(n);return o.setButtonType(NSRadioButton),""!=t&&o.setTitle(t),o.setState(a?NSOnState:NSOffState),o.myGroup=this._buttonsGroups,o.myIndex=i,o.setCOSJSTargetFunction(this._buttonsGroups.radioTargetFunction),this.views[e]=o,this.container.addSubview(o),this._buttonsGroups.btns.push(o),o}},{key:"addButton",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=NSButton.alloc().initWithFrame(a||this.getNewFrame(20,n));return o.setTitle(t),o.setBezelStyle(NSRoundedBezelStyle),o.sizeToFit(),o.setCOSJSTargetFunction(i),this.container.addSubview(o),this.views[e]=o,o}},{key:"addHint",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:23;this.y+=3;var n=NSTextField.alloc().initWithFrame(this.getNewFrame(i,-1,3));return n.setStringValue(t),n.setColor=NSColor.secondaryLabelColor(),n.setBezeled(!1),n.setDrawsBackground(!1),n.setEditable(!1),n.setSelectable(!1),n.setFont(NSFont.systemFontOfSize(10)),this.container.addSubview(n),""!=e&&(this.views[e]=n),n}},{key:"addDivider",value:function(){var e=NSMakeRect(0,this.y-1,NSWidth(this.rect)-10,1);this.y-=11;var t=NSView.alloc().initWithFrame(e);return t.setWantsLayer(1),t.layer().setBackgroundColor(CGColorCreateGenericRGB(.8,.8,.8,1)),this.container.addSubview(t),t}},{key:"addImage",value:function(e,t,i){var n=NSImageView.alloc().initWithFrame(i);return n.setImage(t),this.container.addSubview(n),this.views[e]=n,n}},{key:"finish",value:function(){this.window=null}}]),e}()),f="gxBucket",b="gxS3SecretKey",S="gxS3AccessKey",y="gxS3Enabled",g="DesignOpsQueue",w="enablePreview",p="enableFonts";t.default=function(e){var t=1==a.a.settingForKey(y),i=1==a.a.settingForKey(w),n=1==a.a.settingForKey(p),o=a.a.settingForKey(f),r=a.a.settingForKey(b),s=a.a.settingForKey(S),l=a.a.settingForKey(g);null==l&&(l=""),null==s&&(s="<your access key here>"),null==o&&(o="<your bucket name>"),null==r&&(r="<your secret key>"),v.setUp(e);var u=new v("GeneXus Plugin Configuration",NSMakeRect(0,0,400,270),"Save","Export & Sharing options");v.setUp(e),u.addLeftLabel("","Export Options"),u.addDivider(),u.addCheckbox("enablePreview","Send Preview for Pages",i,(function(){})),u.addCheckbox("enableFonts","Send Fonts",n,(function(){})),u.addLeftLabel("","Sharing Options"),u.addDivider(),u.addCheckbox("enableS3","Enable S3 Sharing",t,(function(){var e=d.isEditable();d.setEnabled(!e),d.setEditable(!e),c.setEditable(!e),c.setEnabled(!e),h.setEditable(!e),h.setEnabled(!e),m.setEditable(e),m.setEnabled(e)})),u.addLeftLabel("","S3 Bucket");var d=u.addTextInput("s3Bucket","",o,"Enter bucket name");d.setEditable(t),d.setEnabled(t),u.addLeftLabel("","S3 Access Key");var c=u.addTextInput("s3AccessKey","",s,"Enter access Key");c.setEditable(t),c.setEnabled(t),u.addLeftLabel("","S3 Secret Key");var h=u.addTextInput("s3SecretKey","",r,"Enter secret Key");h.setEditable(t),h.setEnabled(t),u.addDivider(),u.addLeftLabel("","Queue Path");var m=u.addTextInput("queueDesign","",l,"Path to filesystem queue");for(m.setEditable(!t),m.setEnabled(!t),u.y-=20;;){if(!u.run())return u.finish(),!1;var F=u.views.enableS3.state(),x=u.views.enablePreview.state(),k=u.views.enableFonts.state();l=u.views.queueDesign.stringValue()+"",r=u.views.s3SecretKey.stringValue()+"",s=u.views.s3AccessKey.stringValue()+"",o=u.views.s3Bucket.stringValue()+"",a.a.setSettingForKey("DesignOpsQueue",l),a.a.setSettingForKey("gxS3Enabled",F),a.a.setSettingForKey("enablePreview",x),a.a.setSettingForKey("enableFonts",k),s.startsWith("<")||a.a.setSettingForKey("gxS3AccessKey",s),r.startsWith("<")||a.a.setSettingForKey("gxS3SecretKey",r),o.startsWith("<")||a.a.setSettingForKey("gxBucket",o);break}u.finish()}}]);if("default"===e&&"function"==typeof i)i(t);else{if("function"!=typeof i[e])throw new Error('Missing export named "'+e+'". Your command should contain something like `export function " + key +"() {}`.');i[e](t)}}catch(n){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw n;process.emit("uncaughtException",n,"uncaughtException")}}globalThis.onRun=__skpm_run.bind(this,"default");